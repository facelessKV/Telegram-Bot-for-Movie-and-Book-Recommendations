# Инструкция по установке и запуску Telegram-бота для рекомендации фильмов и книг

Эта инструкция поможет вам установить и запустить бота даже если вы никогда раньше не работали с программированием.

## Что нужно подготовить перед установкой:

1. **Токен Telegram бота** - получается у [@BotFather](https://t.me/BotFather) в Телеграме
2. **API ключ TMDb** - для получения информации о фильмах
3. **API ключ Google Books** - для получения информации о книгах

## Получение необходимых API-ключей:

### 1. Получение токена Telegram бота:
1. Откройте Telegram и найдите бота @BotFather
2. Отправьте ему команду `/newbot`
3. Следуйте инструкциям, указав имя бота и его username (должен заканчиваться на "bot")
4. После создания бота вы получите токен вида `123456789:ABCDefGhIJKlmnOPQRstUVwxYZ`
5. Сохраните этот токен - он понадобится для настройки бота

### 2. Получение API ключа TMDb:
1. Зайдите на сайт [https://www.themoviedb.org/](https://www.themoviedb.org/)
2. Зарегистрируйтесь или войдите в существующий аккаунт
3. Перейдите в раздел "Настройки" (Settings) в выпадающем меню профиля
4. Выберите "API" в меню слева
5. Следуйте инструкциям, чтобы получить API ключ (Версия 3 auth)
6. Сохраните полученный ключ

### 3. Получение API ключа Google Books:
1. Зайдите на сайт [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект или выберите существующий
3. В меню слева найдите "APIs & Services" > "Library"
4. Найдите "Google Books API" и активируйте его
5. Вернитесь в "APIs & Services" > "Credentials"
6. Нажмите "Create credentials" > "API key"
7. Сохраните полученный ключ

## Установка и запуск на Windows:

### Шаг 1: Установка Python 3.10
1. Скачайте установщик Python 3.10.x с официального сайта: [https://www.python.org/downloads/release/python-3100/](https://www.python.org/downloads/release/python-3100/)
2. Выберите установщик "Windows installer (64-bit)" и скачайте его
3. Запустите установщик
4. **ВАЖНО**: Отметьте галочку "Add Python to PATH" в начале установки
5. Нажмите "Install Now" и дождитесь завершения установки

### Шаг 2: Скачивание кода бота
1. Создайте новую папку на компьютере, например, "telegram-bot"
2. Сохраните файл с кодом бота в эту папку под названием `bot.py`

### Шаг 3: Открытие командной строки
1. Нажмите клавиши `Win + R` на клавиатуре
2. Введите `cmd` и нажмите Enter
3. В открывшейся командной строке перейдите в созданную вами папку:
   ```
   cd путь_к_вашей_папке\telegram-bot
   ```
   (например: `cd C:\Users\Имя\Documents\telegram-bot`)

### Шаг 4: Установка необходимых библиотек
1. В командной строке введите:
   ```
   pip install aiogram==3.0.0 requests
   ```
2. Дождитесь окончания установки

### Шаг 5: Настройка API ключей
1. Откройте файл `bot.py` в любом текстовом редакторе (например, Блокнот)
2. Найдите следующие строки:
   ```python
   API_TOKEN = 'YOUR_TELEGRAM_BOT_TOKEN'
   TMDB_API_KEY = 'YOUR_TMDB_API_KEY'
   GOOGLE_BOOKS_API_KEY = 'YOUR_GOOGLE_BOOKS_API_KEY'
   ```
3. Замените `'YOUR_TELEGRAM_BOT_TOKEN'` на полученный от @BotFather токен, сохраняя кавычки
4. Замените `'YOUR_TMDB_API_KEY'` на ваш ключ TMDb, сохраняя кавычки
5. Замените `'YOUR_GOOGLE_BOOKS_API_KEY'` на ваш ключ Google Books, сохраняя кавычки
6. Сохраните изменения в файле

### Шаг 6: Запуск бота
1. В командной строке введите:
   ```
   python bot.py
   ```
2. Если бот запустился успешно, вы увидите сообщение "Бот запущен!"
3. Теперь можете открыть Telegram и начать общение с вашим ботом

### Шаг 7: Остановка бота
Чтобы остановить бота, нажмите `Ctrl + C` в командной строке

## Установка и запуск на Linux:

### Шаг 1: Установка Python 3.10
Откройте терминал и введите следующие команды:

Для Ubuntu/Debian:
```
sudo apt update
sudo apt install software-properties-common
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install python3.10 python3.10-venv python3-pip
```

Для Fedora:
```
sudo dnf install python3.10
```

### Шаг 2: Создание директории и файла бота
1. Создайте новую директорию:
   ```
   mkdir ~/telegram-bot
   cd ~/telegram-bot
   ```
2. Создайте файл бота:
   ```
   nano bot.py
   ```
3. Скопируйте код бота в открывшийся редактор
4. Нажмите `Ctrl + O`, затем Enter для сохранения
5. Нажмите `Ctrl + X` для выхода из редактора

### Шаг 3: Создание виртуального окружения и установка зависимостей
1. В терминале (находясь в папке ~/telegram-bot) выполните:
   ```
   python3.10 -m venv venv
   source venv/bin/activate
   pip install aiogram==3.0.0 requests
   ```

### Шаг 4: Настройка API ключей
1. Откройте файл бота для редактирования:
   ```
   nano bot.py
   ```
2. Найдите следующие строки:
   ```python
   API_TOKEN = 'YOUR_TELEGRAM_BOT_TOKEN'
   TMDB_API_KEY = 'YOUR_TMDB_API_KEY'
   GOOGLE_BOOKS_API_KEY = 'YOUR_GOOGLE_BOOKS_API_KEY'
   ```
3. Замените `'YOUR_TELEGRAM_BOT_TOKEN'` на полученный от @BotFather токен, сохраняя кавычки
4. Замените `'YOUR_TMDB_API_KEY'` на ваш ключ TMDb, сохраняя кавычки
5. Замените `'YOUR_GOOGLE_BOOKS_API_KEY'` на ваш ключ Google Books, сохраняя кавычки
6. Нажмите `Ctrl + O`, затем Enter для сохранения
7. Нажмите `Ctrl + X` для выхода из редактора

### Шаг 5: Запуск бота
1. В терминале введите:
   ```
   python bot.py
   ```
2. Если бот запустился успешно, вы увидите сообщение "Бот запущен!"
3. Теперь можете открыть Telegram и начать общение с вашим ботом

### Шаг 6: Запуск бота в фоновом режиме (опционально)
Если вы хотите, чтобы бот работал в фоновом режиме после закрытия терминала:
1. Установите screen:
   ```
   sudo apt install screen   # для Ubuntu/Debian
   sudo dnf install screen   # для Fedora
   ```
2. Создайте новую screen-сессию:
   ```
   screen -S bot
   ```
3. Активируйте виртуальное окружение и запустите бота:
   ```
   cd ~/telegram-bot
   source venv/bin/activate
   python bot.py
   ```
4. Нажмите `Ctrl + A`, затем `D` для отсоединения от screen-сессии (бот продолжит работать)
5. Чтобы вернуться к сессии, введите:
   ```
   screen -r bot
   ```

## Использование бота:

После запуска бота вы можете использовать следующие команды в Telegram:

1. `/start` - начать взаимодействие с ботом
2. `/help` - получить инструкцию по использованию
3. `/recommend` - получить случайную рекомендацию
4. `/genre` - выбрать конкретный жанр для рекомендации

## Решение проблем:

1. **Ошибка "ModuleNotFoundError"**: Убедитесь, что вы правильно установили все библиотеки с помощью pip
2. **Ошибка при запуске бота**: Проверьте, что вы правильно указали токен Telegram бота и API ключи
3. **Бот не отвечает в Telegram**: Убедитесь, что бот запущен в командной строке/терминале и что вы начали диалог с правильным ботом

## Дополнительная информация:

- Бот использует The Movie Database (TMDb) для получения информации о фильмах
- Бот использует Google Books API для получения информации о книгах
- Все данные обновляются в реальном времени

Если у вас возникли проблемы или вопросы, вы можете обратиться к документации:
- [Документация aiogram](https://docs.aiogram.dev/)
- [Документация TMDb API](https://developers.themoviedb.org/3)
- [Документация Google Books API](https://developers.google.com/books)